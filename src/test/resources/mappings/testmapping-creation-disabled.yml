---

name: test
version: 42
xpathversion: 2.0
applicable:
    xpath: "boolean(//*[local-name()='MD_Metadata']) and boolean(namespace-uri(//*[local-name()='MD_Metadata']) = 'http://www.isotc211.org/2005/gmd')"
type: testrecord
defaults:
    store: &STORE true
namespaces:
    gmd: http://www.isotc211.org/2005/gmd
    gmi: http://www.isotc211.org/2005/gmi
    ogc: http://www.opengis.net/ogc
    xlink: http://www.w3.org/1999/xlink
    ows: http://www.opengis.net/ows
    csw: http://www.opengis.net/cat/csw/2.0.2
    dc: http://purl.org/dc/elements/1.1/
    dct: http://purl.org/dc/terms/
index:
    create: false
    # only for testing parser:
    dynamic_mapping: true
    settings: |
        index:
            number_of_shards: 1 
            number_of_replicas: 1
#    settings: |
#        '"settings" : {
#            "index" : {
#                "number_of_shards" : 3,
#                "number_of_replicas" : 2
#            }
#        }'
mappings:
    id:
        xpath: "//gmd:fileIdentifier"
        isoqueryable: false
        properties:
            type: string
            store: *STORE
            index: analyzed
            #index_name: "id"
            boost: 2.0
    title:
        xpath: "//title"
        isoqueryable: false
        properties:
            store: *STORE
            type: string
            index_name: title
            boost: 10
            copy_to: autocomplete_field
            term_vector: yes
    lang:
        xpath: "//gmi:MI_Metadata/gmd:language"
        isoqueryable: true
        isoqueryableName: language
        properties:
            index_name: language
            null_value: "N/A"
    date:
        xpath: "//*"
        properties:
            # https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html
            format: YYYY-MM-DD
            ignore_malformed: true
        